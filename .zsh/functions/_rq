#compdef rq

local expl

# FIXME: copied from _rpm function, should refactor out
if ( [[ ${+_rpms} -eq 0 ]] || _cache_invalid RPMs ) &&
    ! _retrieve_cache RPMs; then
    _rpms=( $(_call_program packages rpm -qa 2>/dev/null) )
    _store_cache RPMs _rpms
fi

_wanted packages expl 'package' \
    compadd -M 'r:|-=* r:|=*' - "$_rpms[@]" && ret=0


