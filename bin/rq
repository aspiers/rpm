#!/bin/sh

if [ $# = 0 ]; then
  echo "Usage: $0 <rpm> [ <rpm> ... ]"
  echo "Shows everything about one or more rpms."
  exit 1
fi

while [ -n "$1" ]; do
  rpm="$1"
  shift

  if [ -e "$rpm" ]; then
    popt='p'
  else
    popt=''
  fi

  divider="$( perl -e 'print "-" x 78' )" # sledgehammer

  rpm -q$popt -iv                              \
      --qf "$divider\n"                        \
      --qf "Requires:\n"  --requires           \
      --qf "$divider\n"                        \
      --qf "Provides:\n"  --provides           \
      --qf "$divider\n"                        \
      --qf "Scripts:\n"   --scripts --triggers \
      --qf "$divider\n"                        \
      --qf "Changelog:\n" --changelog          \
      --qf "$divider\n"                        \
      --qf "Files:\n"     --list               \
      -- "$rpm"
done | less